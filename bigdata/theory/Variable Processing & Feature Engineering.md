# 분석 변수 처리 정리

## 1. 변수 선택 (Variable Selection)

* 데이터와 이를 특정 짓는 변수는 많을수록 좋지만,
* 분석 모형을 구성·운영할 때 **불필요하게 많은 데이터 요구 → 비효율 발생**
* 목적에 맞는 핵심 변수만 선택하는 과정이 필요

---

## 2. 변수별 모형의 분류

### 2.1 전체 모형 (Full Model, FM)

* 모든 독립변수를 사용한 모형

### 2.2 축소 모형 (Reduced Model, RM)

* 전체 모형에서 일부 독립변수를 제거하여 만든 모형

### 2.3 영 모형 (Null Model, NM)

* 독립변수가 하나도 없는 모형

---

## 3. 변수 선택 방법

### 3.1 전진 선택법 (Forward Selection)

* **영 모형(NM)**에서 시작
* 모든 독립변수 중 종속변수와의 **단순상관계수 절댓값이 가장 큰 변수**를 포함
* **부분 F-검정(F-test)**으로 유의성 검증

  * 유의 → 가장 큰 F 통계량을 가지는 모형 선택
  * 유의하지 않음 → 변수 선택 없이 종료
* **한 번 추가된 변수는 제거하지 않음**

---

### 3.2 후진 선택법 (Backward Elimination)

* **전체 모형(FM)**에서 시작
* 종속변수와의 단순상관계수 절댓값이 가장 작은 변수를 제거
* 부분 F-검정으로 유의성 검증

  * 유의하지 않음 → 변수 제거
  * 유의 → 변수 제거 없이 종료
* **한 번 제거된 변수는 다시 추가하지 않음**

---

### 3.3 단계적 선택법 (Stepwise Selection)

* 전진 + 후진 선택법의 결합
* 전진 선택으로 가장 유의한 변수 포함
* 이후 후진 선택을 적용하여 유의하지 않은 변수 제거
* 제거된 변수는 다시 포함하지 않음
* 유의한 설명 변수가 없을 때까지 반복

---

## 4. 차원 축소 (Dimensionality Reduction)

### 4.1 자료의 차원

* 분석하는 **데이터 종류(변수)의 수**

### 4.2 차원 축소란?

* 분석 목적에 따라 변수의 수를 줄이는 과정

### 4.3 차원 축소의 필요성

1. **복잡도 감소**: 동일한 품질이라면 적은 차원이 효율적
2. **과적합 방지**: 모델의 신뢰성 저하 예방
3. **해석력 확보**: 단순한 모델일수록 구조 이해 용이
4. **차원의 저주 해결**: 차원 증가로 성능 저하 문제 완화

---

### 4.4 차원 축소 방법

#### 1) 요인 분석 (Factor Analysis)

* 다수 변수 간의 관계를 분석하여 **공통 요인**으로 축약

#### 2) 주성분 분석 (PCA)

* 데이터 분포를 가장 잘 설명하는 **주성분**을 찾는 방법
* 개별 데이터가 아닌 **전체 분포의 분산**에 초점
* **특징**

  * 차원 축소에 널리 사용
  * 분포 가정 불필요
  * 최대 분산 방향을 주요 정보로 간주

#### 3) 특이값 분해 (SVD)

* m×n 행렬 M을 다음으로 분해

  * m×m 직교행렬
  * m×n 대각행렬
  * n×n 직교행렬
* 직교행렬: 열벡터 간 독립
* 대각행렬: 대각성분 외 모두 0
* 일부 큰 특이값만으로도 핵심 정보 유지 가능

#### 4) 음수 미포함 행렬분해 (NMF)

* 음수가 없는 행렬 V를
* 음수가 없는 두 행렬의 곱으로 분해

---

## 5. 파생변수와 요약변수

### 5.1 데이터 마트(Data Mart)

* 데이터 웨어하우스로부터 복제·수집된 데이터의 중간 계층
* 분석을 위한 **기본 변수, 요약변수, 파생변수의 집합**

### 5.2 파생변수 (Derived Variable)

* 특정 조건 또는 함수로 새롭게 생성한 변수
* 주관적일 수 있으므로 **논리적 타당성 필수**

### 5.3 요약변수 (Summary Variable)

* 수집된 데이터를 분석 목적에 맞게 종합한 변수
* 재활용성이 높아 데이터 마트의 핵심 변수

---

## 6. 변수 변환 (Variable Transformation)

* 데이터를 분석하기 좋은 형태로 변환
* 데이터 전처리 과정의 일부

### 주요 방법

1. 범주형 변환
2. 정규화: 스케일 차이 보정
3. 로그 변환
4. 역수 변환
5. 지수 변환
6. 제곱근 변환
7. 분포 형태별 정규분포 변환
8. Box-Cox 변환: 정규분포에 가깝게 변환

---

## 7. 불균형 데이터 처리 (Imbalanced Data)

### 7.1 문제점

* 클래스 비율 차이가 클 경우
* 정확도는 높아도 **소수 클래스 재현율 급감** 가능

### 7.2 처리 방법

#### 1) 가중치 균형 방법

* 손실 함수 계산 시 특정 클래스에 더 큰 가중치 부여
* **고정 비율**: 클래스 비율의 역비율 적용 (예: 1:5 → 5:1)
* **최적 비율**: 가중치를 조정하며 최적값 탐색

#### 2) 언더샘플링 / 오버샘플링

* **언더샘플링**: 다수 클래스 일부 제거
* **오버샘플링**: 소수 클래스 데이터를 복제하여 비율 조정

---

## 8. 인코딩 (Encoding)

* 범주형 데이터를 수치형으로 변환

### 8.1 레이블 인코딩 (Label Encoding)

* 범주에 숫자 라벨 부여
* **주의**: 숫자에 순서·크기 의미가 부여될 수 있음

### 8.2 원-핫 인코딩 (One-Hot Encoding)

* 해당 범주만 1, 나머지는 0으로 표현한 이진 벡터

### 8.3 타깃 인코딩 (Target Encoding)

* 분류 문제에서 사용
* 각 범주를 **종속변수(타깃)의 평균값**으로 인코딩
